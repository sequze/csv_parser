# CSV Processor

Консольное приложение для обработки CSV-файлов с поддержкой:
- Фильтрации (`--where`) по значениям с операторами `>`, `<`, `=`
- Агрегации (`--aggregate`) по значениям с функциями `min`, `max`, `avg`

## Пример запуска
запускаем с корня проекта:

```bash
python -m app.main --file products.csv --where "price>500" --aggregate "price=avg"
```
- Фильтрация и агрегация - необязательные параметры

## Пример работы программы
```
$ python -m app.main --file "products.csv" --where "price>500"
+------------------+---------+---------+----------+
| name             | brand   |   price |   rating |
+==================+=========+=========+==========+
| iphone 15 pro    | apple   |     999 |      4.9 |
+------------------+---------+---------+----------+
| galaxy s23 ultra | samsung |    1199 |      4.8 |
+------------------+---------+---------+----------+
| iphone 14        | apple   |     799 |      4.7 |
+------------------+---------+---------+----------+
| galaxy z flip 5  | samsung |     999 |      4.6 |
+------------------+---------+---------+----------+
| iphone 13 mini   | apple   |     599 |      4.5 |
+------------------+---------+---------+----------+
```

```
$ python -m app.main --file products.csv --where "price>500" --aggregate "price=avg"
+-------+
|   avg |
+=======+
|   919 |
+-------+
```

## Установка зависимостей
```bash
pip install -r requirements.txt
```

## Запуск тестов
```bash
pytest --cov=app
```
## Как всё работает

Структура проекта:
```
├── app
│   ├── main.py             - Точка входа
│   ├── parser.py           - Парсинг аргументов
│   ├── processor.py        - Основная логика
│   ├── file_worker.py      - Чтение и типизация CSV
│   ├── filters.py          - Фильтрация
│   ├── aggregation.py      - Агрегация
│   └── models.py           - Класс для аргументов
│
├── tests/
```
- Точка входа - main.py
- Аргументы считываются в parser.py с помощью библиотеки argparse
- В file_worker считывается таблица и типизируются колонки
- Происходит фильтрация в filters.py и агрегация в aggregation.py
- Результат выводится в виде таблицы с помощью библиотеки tabulate
